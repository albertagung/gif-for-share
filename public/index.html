<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test Upload</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.8/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <input type="file" @change="readFile" name="image">
      <img alt="Preview" :src="imagePreview">
      <input type="text" v-model="title">
      <button type="button" @click="uploadImage">Upload</button>
      <button type="button" @click="removeImage">Remove Image</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.1/axios.min.js"></script>
    <script type="text/javascript">
    new Vue({
      el:"#app",
      data:{
        title:null,
        imageFile:null,
        imagePreview:null
      },
      methods:{
        readFile:function(){
          var reader=new FileReader();
          var inputFile=event.target.files || event.dataTransfer.files;
          if(!inputFile.length){
            return;
          }else{
            var reader=new FileReader();
            reader.addEventListener("load",function(e){
              this.imagePreview = e.target.result;
            }.bind(this));
            reader.readAsDataURL(inputFile[0]);
            this.imageFile=inputFile[0];
          }
        },
        uploadImage:function(){
          var image=new FormData();
          image.append("image",this.imageFile);
          image.append("title",this.title);
          axios.post("http://localhost:3000/api/gif/upload",image).then(function(fromServer){
            console.log(fromServer);
          }).catch(function(err){
            console.log(err);
          });
        },
        removeImage:function(){
          this.imageFile=null;
          this.imagePreview=null;
        }
      }
    });
    </script>
  </body>
</html>
